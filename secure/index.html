
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Advanced configurations for containers">
      
      
      
        <link rel="canonical" href="https://virtualize.link/secure/">
      
      <link rel="icon" href="../images/logo.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.6">
    
    
      
        <title>Securing SWAG - Advanced Configurations</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <script async defer data-domain="virtualize.link" src="https://a.virtualize.link/js/script.js"></script>

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="cyan">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#securing-swag" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="https://virtualize.link" title="Advanced Configurations" class="md-header__button md-logo" aria-label="Advanced Configurations" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Advanced Configurations
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Securing SWAG
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="cyan"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/quietsy/advanced-configurations" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href=".." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../awesome-lsio/" class="md-tabs__link md-tabs__link--active">
        Containers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../setup/" class="md-tabs__link">
        Tools
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://virtualize.link" title="Advanced Configurations" class="md-nav__button md-logo" aria-label="Advanced Configurations" data-md-component="logo">
      
  <img src="../images/logo.png" alt="logo">

    </a>
    Advanced Configurations
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/quietsy/advanced-configurations" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Containers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Containers" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Containers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../awesome-lsio/" class="md-nav__link">
        Awesome LSIO
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../consolidate/" class="md-nav__link">
        Consolidating Proxies
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../nextcloud/" class="md-nav__link">
        Optimizing Nextcloud
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../piped/" class="md-nav__link">
        Piped
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../searx/" class="md-nav__link">
        Searx
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Securing SWAG
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Securing SWAG
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitor-swag" class="md-nav__link">
    Monitor SWAG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-applications" class="md-nav__link">
    Internal Applications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fail2ban" class="md-nav__link">
    Fail2Ban
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geoblock" class="md-nav__link">
    Geoblock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    NGINX Configuration
  </a>
  
    <nav class="md-nav" aria-label="NGINX Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-floc" class="md-nav__link">
    Google FLoC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x-robots-tag" class="md-nav__link">
    X-Robots-Tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hsts" class="md-nav__link">
    HSTS
  </a>
  
    <nav class="md-nav" aria-label="HSTS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-strengthening-hsts" class="md-nav__link">
    Optional - Strengthening HSTS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authelia" class="md-nav__link">
    Authelia
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../socks/" class="md-nav__link">
        SOCKS Proxy
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../split/" class="md-nav__link">
        Split Tunnel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vpn/" class="md-nav__link">
        VPN Route
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../vps/" class="md-nav__link">
        VPS Proxy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Tools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Tools" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Tools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../setup/" class="md-nav__link">
        Setup Template
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../tmux/" class="md-nav__link">
        Tmux
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitor-swag" class="md-nav__link">
    Monitor SWAG
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal-applications" class="md-nav__link">
    Internal Applications
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fail2ban" class="md-nav__link">
    Fail2Ban
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geoblock" class="md-nav__link">
    Geoblock
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#nginx-configuration" class="md-nav__link">
    NGINX Configuration
  </a>
  
    <nav class="md-nav" aria-label="NGINX Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#google-floc" class="md-nav__link">
    Google FLoC
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x-robots-tag" class="md-nav__link">
    X-Robots-Tag
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hsts" class="md-nav__link">
    HSTS
  </a>
  
    <nav class="md-nav" aria-label="HSTS">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#optional-strengthening-hsts" class="md-nav__link">
    Optional - Strengthening HSTS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authelia" class="md-nav__link">
    Authelia
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="securing-swag">Securing SWAG</h1>
<p><a href="https://github.com/linuxserver/docker-swag">SWAG</a> - Secure Web Application Gateway (formerly known as linuxserver/letsencrypt) is a full fledged web server and reverse proxy with Nginx, PHP7, Certbot (Let's Encrypt™ client) and Fail2Ban built in. SWAG allows you to expose applications to the internet, doing so comes with a risk and there are security measures that help reduce that risk. This article details how to configure SWAG and enhance it's security.</p>
<h2 id="requirements">Requirements</h2>
<ul>
<li>A working instance of <a href="https://github.com/linuxserver/docker-swag">SWAG</a></li>
</ul>
<h2 id="monitor-swag">Monitor SWAG</h2>
<p>Use monitoring solutions such as <a href="https://github.com/linuxserver/docker-mods/tree/swag-dashboard">SWAG Dashboard</a> to keep an eye on the traffic going through SWAG and check for suspicious activity such as:</p>
<ul>
<li>A lot of hits from a country unrelated to your users</li>
<li>A lot of requests to a specific page or static file</li>
<li>Referers that shouldn't refer to your domain</li>
<li>A lot of hits on status codes that are not 2xx</li>
</ul>
<h2 id="internal-applications">Internal Applications</h2>
<p>Internal applications can be proxied through SWAG in order to use <code>app.mydomain.com</code> instead of ip:port, and block them externally so only your local network could access them.</p>
<p>Create a file called <code>nginx/internal.conf</code> with the following configuration:</p>
<div class="highlight"><pre><span></span><code><span class="k">allow</span><span class="w"> </span><span class="mi">192</span><span class="s">.168.1.0/24</span><span class="p">;</span><span class="w"> </span><span class="c1">#Replace with your LAN subnet</span>
<span class="k">deny</span><span class="w"> </span><span class="s">all</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>Utilize the lan filter in your configuration by adding the following line inside every location block for every application you want to protect.
<div class="highlight"><pre><span></span><code>    include /config/nginx/internal.conf;
</code></pre></div></p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="k">server</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">collabora.*</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/ssl.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">client_max_body_size</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/internal.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/proxy.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/resolver.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_app</span><span class="w"> </span><span class="s">collabora</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_port</span><span class="w"> </span><span class="mi">9980</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_proto</span><span class="w"> </span><span class="s">https</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="nv">$upstream_proto://$upstream_app:$upstream_port</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Repeat the process for all internal applications and for every location block.</p>
<p>One way to securely access internal applications from the internet is through a VPN, for example WireGuard:</p>
<p><a href="https://hub.docker.com/r/linuxserver/wireguard">WireGuard Container</a></p>
<p><a href="https://blog.linuxserver.io/2019/11/16/setting-up-wireguard-on-opnsense-android/">WireGuard on OPNSense</a></p>
<h2 id="fail2ban">Fail2Ban</h2>
<p>Fail2Ban is an intrusion prevention software that protects external applications from brute-force attacks. Attackers that fail to login to your applications a certain number of times will get blocked from accessing all of your applications.
Fail2Ban looks for failed login attempts in log files, counts the failed attempts in a short period, and bans the IP address of the attacker.</p>
<p>Mount the application logs to SWAG's container by adding a volume for the log to the compose yaml:
<div class="highlight"><pre><span></span><code>      - /path/to/nextcloud/nextcloud.log:/nextcloud/nextcloud.log:ro
</code></pre></div>
If the application has multiple log files with dates, mount the entire folder:
<div class="highlight"><pre><span></span><code>      - /path/to/jellyfin/log:/jellyfin:ro
</code></pre></div>
Recreate the container with the log mount, then create a file called <code>nextcloud.local</code> under <code>fail2ban/filter.d</code>:
<div class="highlight"><pre><span></span><code><span class="k">[Definition]</span><span class="w"></span>
<span class="s">failregex=^.*Login</span><span class="w"> </span><span class="s">failed:</span><span class="w"> </span><span class="s">&#39;?.*&#39;?</span><span class="w"> </span><span class="s">\(Remote</span><span class="w"> </span><span class="s">IP:</span><span class="w"> </span><span class="s">&#39;?&lt;ADDR&gt;&#39;?\).*</span>$<span class="w"></span>
<span class="w">          </span><span class="s">^.*\&quot;remoteAddr\&quot;:\&quot;&lt;ADDR&gt;\&quot;.*Trusted</span><span class="w"> </span><span class="s">domain</span><span class="w"> </span><span class="s">error.*</span>$<span class="w"></span>
<span class="s">ignoreregex</span><span class="w"> </span><span class="p">=</span><span class="w"></span>
</code></pre></div>
The configuration file containes a pattern by which failed login attempts are matched. Test the pattern by failing to login to nextcloud and look for the entry corresponding to your failed attempt.
<div class="highlight"><pre><span></span><code>{&quot;reqId&quot;:&quot;k5j5H7K3eskXt3hCLSc4i&quot;,&quot;level&quot;:2,&quot;time&quot;:&quot;2020-10-14T22:56:14+00:00&quot;,&quot;remoteAddr&quot;:&quot;1.2.3.4&quot;,&quot;user&quot;:&quot;--&quot;,
&quot;app&quot;:&quot;no app in context&quot;,&quot;method&quot;:&quot;POST&quot;,&quot;url&quot;:&quot;/login&quot;,&quot;message&quot;:&quot;Login failed: username (Remote IP: 5.5.5.5)&quot;,
&quot;userAgent&quot;:&quot;Mozilla/5.0 (Linux; Android 11; Pixel 5) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/5.6.7.8 Mobile 
Safari/537.36&quot;,&quot;version&quot;:&quot;19.0.4.2&quot;}
</code></pre></div>
Test the pattern in <code>nextcloud.local</code> by running the following command on the docker host:
<div class="highlight"><pre><span></span><code>docker exec swag fail2ban-regex /nextcloud/nextcloud.log /config/fail2ban/filter.d/nextcloud.local
</code></pre></div>
If the pattern works, you will see matches corresponding to the amount of failed login attempts:
<div class="highlight"><pre><span></span><code>Lines: 92377 lines, 0 ignored, 2 matched, 92375 missed
[processed in 7.51 sec]
</code></pre></div>
The final step is to activate the jail, add the following to <code>fail2ban/jail.local</code>:
<div class="highlight"><pre><span></span><code><span class="k">[nextcloud]</span><span class="w"></span>
<span class="s">enabled</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="s">port</span><span class="w">    </span><span class="p">=</span><span class="w"> </span><span class="s">http,https</span><span class="w"></span>
<span class="s">filter</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">nextcloud</span><span class="w"></span>
<span class="s">logpath</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">/nextcloud/nextcloud.log</span><span class="w"></span>
<span class="s">action</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">iptables-allports[name=nextcloud]</span><span class="w"></span>
</code></pre></div>
The logpath is slightly different for applications that have multiple log files with dates:
<div class="highlight"><pre><span></span><code><span class="k">[jellyfin]</span><span class="w"></span>
<span class="s">enabled</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="s">filter</span><span class="w">   </span><span class="p">=</span><span class="w"> </span><span class="s">jellyfin</span><span class="w"></span>
<span class="s">port</span><span class="w">     </span><span class="p">=</span><span class="w"> </span><span class="s">http,https</span><span class="w"></span>
<span class="s">logpath</span><span class="w">  </span><span class="p">=</span><span class="w"> </span><span class="s">/jellyfin/log*.log</span><span class="w"></span>
<span class="s">action</span><span class="w">   </span><span class="p">=</span><span class="w">  </span><span class="s">iptables-allports[name=jellyfin]</span><span class="w"></span>
</code></pre></div></p>
<p>Repeat the process for every external application, you can find Fail2Ban configurations for most applications on the internet.</p>
<p>If you need to unban an IP address that was blocked, run the following command on the docker host:
<div class="highlight"><pre><span></span><code>docker exec swag fail2ban-client unban &lt;ip address&gt;
</code></pre></div></p>
<p>This great mod sends a discord notification when Fail2Ban blocks an attack: <a href="https://github.com/linuxserver/docker-mods/tree/swag-f2bdiscord">f2bdiscord</a>.</p>
<h2 id="geoblock">Geoblock</h2>
<p>Geoblock reduces the attack surface of SWAG by restricting access based on countries.</p>
<p>Enable geoblock using either <a href="https://github.com/linuxserver/docker-mods/tree/swag-dbip">DBIP mod</a> or <a href="https://github.com/linuxserver/docker-mods/tree/swag-maxmind">Maxmind mod</a>, follow the mod's instructions to set it up.</p>
<p>The mods come with 3 definitions for <code>$geo-whitelist</code>, <code>$geo-blacklist</code>, <code>$lan-ip</code>.</p>
<p>An example for allowing a single country:
<div class="highlight"><pre><span></span><code><span class="k">map</span><span class="w"> </span><span class="nv">$geoip2_data_country_iso_code</span><span class="w"> </span><span class="nv">$geo-whitelist</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">UK</span><span class="w"> </span><span class="s">yes</span><span class="p">;</span><span class="w"> </span><span class="c1">#Replace with your country code list https://dev.maxmind.com/geoip/legacy/codes/iso3166/</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
An example for blocking high risk countries: (GilbN's list based on the Spamhaus statistics and Aakamai’s state of the internet report)
<div class="highlight"><pre><span></span><code><span class="k">map</span><span class="w"> </span><span class="nv">$geoip2_data_country_iso_code</span><span class="w"> </span><span class="nv">$geo-blacklist</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kn">default</span><span class="w"> </span><span class="s">yes</span><span class="p">;</span><span class="w"> </span><span class="c1">#If your country is listed below, remove it from the list</span>
<span class="w">    </span><span class="kn">CN</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#China</span>
<span class="w">    </span><span class="kn">RU</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Russia</span>
<span class="w">    </span><span class="kn">HK</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Hong Kong</span>
<span class="w">    </span><span class="kn">IN</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#India</span>
<span class="w">    </span><span class="kn">IR</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Iran</span>
<span class="w">    </span><span class="kn">VN</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Vietnam</span>
<span class="w">    </span><span class="kn">TR</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Turkey</span>
<span class="w">    </span><span class="kn">EG</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Egypt</span>
<span class="w">    </span><span class="kn">MX</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Mexico</span>
<span class="w">    </span><span class="kn">JP</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Japan</span>
<span class="w">    </span><span class="kn">KR</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#South Korea</span>
<span class="w">    </span><span class="kn">KP</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#North Korea</span>
<span class="w">    </span><span class="kn">PE</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Peru</span>
<span class="w">    </span><span class="kn">BR</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Brazil</span>
<span class="w">    </span><span class="kn">UA</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Ukraine</span>
<span class="w">    </span><span class="kn">ID</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Indonesia</span>
<span class="w">    </span><span class="kn">TH</span><span class="w"> </span><span class="s">no</span><span class="p">;</span><span class="w"> </span><span class="c1">#Thailand</span>
<span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>Utilize the geoblock in your configuration by adding one of the following lines above your location section in every application you want to protect.</p>
<p><strong>Note that when using a whitelist filter, you also need to check if the source is a LAN IP, it's not required when using a blacklist filter.</strong>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$lan-ip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">yes)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kn">set</span><span class="w"> </span><span class="nv">$geo-whitelist</span><span class="w"> </span><span class="s">yes</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$geo-whitelist</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">no)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kn">return</span><span class="w"> </span><span class="mi">404</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
Or
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$geo-blacklist</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">no)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kn">return</span><span class="w"> </span><span class="mi">404</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></p>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="k">server</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="mi">443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">listen</span><span class="w"> </span><span class="s">[::]:443</span><span class="w"> </span><span class="s">ssl</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kn">server_name</span><span class="w"> </span><span class="s">authelia.*</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/ssl.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kn">client_max_body_size</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kn">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$lan-ip</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">yes)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kn">set</span><span class="w"> </span><span class="nv">$geo-whitelist</span><span class="w"> </span><span class="s">yes</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">#Check for a LAN IP</span>
<span class="w">    </span><span class="kn">if</span><span class="w"> </span><span class="s">(</span><span class="nv">$geo-whitelist</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="s">no)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kn">return</span><span class="w"> </span><span class="mi">404</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="c1">#Check the country filter</span>

<span class="w">    </span><span class="kn">location</span><span class="w"> </span><span class="s">/</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/proxy.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">include</span><span class="w"> </span><span class="s">/config/nginx/resolver.conf</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_app</span><span class="w"> </span><span class="s">authelia</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_port</span><span class="w"> </span><span class="mi">9091</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">set</span><span class="w"> </span><span class="nv">$upstream_proto</span><span class="w"> </span><span class="s">http</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="kn">proxy_pass</span><span class="w"> </span><span class="nv">$upstream_proto://$upstream_app:$upstream_port</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Add the lines to every external application based on your needs.</p>
<h2 id="nginx-configuration">NGINX Configuration</h2>
<h3 id="google-floc">Google FLoC</h3>
<p>Google will track any user visiting your website even if it doesn't have Google analytics or any other services related to Google. One easy way for users visiting websites to opt out of this is to not use Google Chrome and use browsers like Firefox, etc. However, website maintainers can also help against this new tracking technology by opting out of the FLoC network.</p>
<p>Add the following config line to <code>ssl.conf</code> to opt out:
<div class="highlight"><pre><span></span><code>add_header Permissions-Policy &quot;interest-cohort=()&quot;;
</code></pre></div></p>
<h3 id="x-robots-tag">X-Robots-Tag</h3>
<p>You can prevent applications from appearing in results of search engines and web crawlers, regardless of whether other sites link to it. It doesn't work on all search engines and web crawlers, but it significantly reduces the amount.</p>
<p>Add the X-Robots-Tag config line to <code>ssl.conf</code> to enable it on <strong>all</strong> of your applications:
<div class="highlight"><pre><span></span><code>add_header X-Robots-Tag &quot;noindex, nofollow, nosnippet, noarchive&quot;;
</code></pre></div></p>
<p>Disable on a specific application and allow search engines to display it by add the following line to the application config inside the server tag:
<div class="highlight"><pre><span></span><code>add_header X-Robots-Tag &quot;&quot;;
</code></pre></div></p>
<h3 id="hsts">HSTS</h3>
<p>HTTP Strict Transport Security (HSTS) is a web security policy mechanism that helps to protect websites against man-in-the-middle attacks such as protocol downgrade attacks and cookie hijacking. It allows web servers to declare that web browsers (or other complying user agents) should automatically interact with it using only HTTPS connections, which provide Transport Layer Security (TLS/SSL), unlike the insecure HTTP used alone.</p>
<p><strong>HSTS requires a working SSL certificate on your domains before enabling it.</strong></p>
<p>Enable HSTS by uncommenting the HSTS config line in ssl.conf:
<div class="highlight"><pre><span></span><code>add_header Strict-Transport-Security &quot;max-age=63072000; includeSubDomains; preload&quot; always;
</code></pre></div></p>
<h4 id="optional-strengthening-hsts">Optional - Strengthening HSTS</h4>
<p>After enabling the HSTS header, users are still vulnerable to attack if they access an HSTS‑protected website over HTTP when they have:</p>
<ul>
<li>Never before visited the site</li>
<li>Recently reinstalled their operating system</li>
<li>Recently reinstalled their browser</li>
<li>Switched to a new browser</li>
<li>Switched to a new device (for example, mobile phone)</li>
<li>Deleted their browser’s cache</li>
<li>Not visited the site recently and the max-age time has passed</li>
</ul>
<p>To address this, Google maintains a “HSTS preload list” of web domains and subdomains that use HSTS and have submitted their names to <a href="https://hstspreload.org/">HSTS Preload</a>. This domain list is distributed and hardcoded into major web browsers. Clients that access web domains in this list automatically use HTTPS and refuse to access the site using HTTP.</p>
<p>Be aware that once you set the STS header or submit your domains to the HSTS preload list, it is impossible to remove it. It’s a one‑way decision to make your domains available over HTTPS.</p>
<h2 id="authelia">Authelia</h2>
<p>Authelia is an open-source authentication and authorization server providing 2-factor authentication and single sign-on (SSO) for your applications via a web portal. Refer to this <a href="https://blog.linuxserver.io/2020/08/26/setting-up-authelia/">blog post to configure Authelia</a>.</p>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">January 15, 2022</span>
      
    
  </small>
</div>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <!--
  Copyright (c) 2016-2022 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Footer -->
<footer class="md-footer">

  <!-- Link to previous and/or next page -->
  
    <nav
      class="md-footer__inner md-grid"
      aria-label="Footer"
    >

      <!-- Link to previous page -->
      
        
        <a
          href="../searx/"
          class="md-footer__link md-footer__link--prev"
          aria-label="Previous: Searx"
          rel="prev"
        >
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Searx
            </div>
          </div>
        </a>
      

      <!-- Link to next page -->
      
        
        <a
          href="../socks/"
          class="md-footer__link md-footer__link--next"
          aria-label="Next: SOCKS Proxy"
          rel="next"
        >
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              SOCKS Proxy
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  

  <!-- Further information -->
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <!-- Social links -->
      
        <div class="md-social">
  
    
    
    <a href="/feed_rss_created.xml" target="_blank" rel="noopener" title="" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "search.suggest", "navigation.tabs", "navigation.tabs.sticky", "navigation.top", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.1514a9a0.min.js"></script>
      
    
  </body>
</html>